{
    "name": "config",
    "log_to_wandb": true,
    "pred_with_cpu": false,

    "train_series_path": "data/raw/train_series.parquet",
    "train_events_path": "data/raw/train_events.csv",
    "test_series_path": "data/raw/test_series.parquet",
    "fe_loc_out": "data/features",
    "fe_loc_in": "data/processed",
    "processed_loc_out": "data/processed",
    "processed_loc_in": "data/raw",
    "model_store_loc": "tm",
    "data_info": {
        "window_size": 17280,
        "downsampling_factor": 12
    },
    "preprocessing": [
        {
            "kind": "mem_reduce",
            "id_encoding_path": "series_id_encoding.json"
        },
        {
            "kind": "similarity_nan",
            "as_feature": true
        },
        {
          "kind": "add_state_labels",
          "id_encoding_path": "series_id_encoding.json",
          "events_path": "data/raw/train_events.csv",
          "use_similarity_nan": true,
          "fill_limit": 8640,
          "nan_tolerance_window": 5

        },
        {
            "kind": "add_event_labels",
            "id_encoding_path": "series_id_encoding.json",
            "events_path": "data/raw/train_events.csv",
            "smoothing": 0,
            "steepness": 1
        },
        {
            "kind": "split_windows"
        }
    ],
   "feature_engineering": [
      {
        "kind": "time",
        "time_features": [
          "hour",
          "minute"
        ]
      },
      {
        "kind": "rotation",
        "window_sizes": [
          10,
          100,
          1000
        ]
      }
    ],
    "pretraining": {
      "downsample": {
        "factor": 12,
        "features": [
          "f_anglez",
          "f_enmo"
        ],
        "methods": [
          "min",
          "max",
          "mean",
          "std",
          "median",
          "var",
          "range"
        ],
        "standard": "mean"
      },
      "test_size": 0.2,
      "scaler": {
        "kind": "standard-scaler",
        "copy": true
      }
    },
    "models": {
        "EventResGRU": {
            "type": "event-res-gru",
            "loss": "shrinkage-loss",
            "epochs": 100,
            "batch_size": 32,
            "optimizer": "adam-torch",
            "early_stopping": 10,
            "network_params": {
              "hidden_size": 64,
              "n_layers": 5,
              "activation": "relu"
            },
            "activation_delay": 15,
            "lr": 0.001,
            "lr_schedule": {
              "t_initial": 100,
              "warmup_t": 5,
              "warmup_lr_init": 1e-6,
              "lr_min": 2e-8
            },
            "threshold": 0
        }
    },
    "ensemble": {
        "models": ["EventResGRU"],
        "weights": [1],
        "comb_method": "addition"
    },
    "ensemble_loss": "mse-torch",
    "cv": {
        "splitter": "group_k_fold",
        "scoring": ["score_full", "score_clean"],
        "splitter_params": {
            "n_splits": 3
        }
    },
    "hpo": {
        "apply": false,
        "method": "example_hpo"
    },
  "train_for_submission": true,
  "scoring": true,
  "visualize_preds": {
      "n": 0,
      "browser_plot": false,
      "save": false
  }
}
